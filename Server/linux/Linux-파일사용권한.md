# Linux 파일 사용 권한 

리눅스에서 파일(File)을 사용해 할 수 있는 작업은 크게 세 가지로 나눌 수 있다.

1. 파일에 저장된 데이터를 읽기 read ➡ r
2. 파일에 데이터 쓰기 write ➡ w
3. 파일을 실행하기 execute ➡ x

만약 리눅스의 모든 파일이 읽기, 쓰기, 실행 가능하게 만들어져 있다면, 의도치 않은 명령어 사용으로 파일이 변경되거나 삭제될 수 있다.

따라서, 이를 방지하기 위해 리눅스는 각 파일 및 디렉토리에 대해 읽기(r), 쓰기(w), 실행(x) 권한을 개별적으로 지정할 수 있도록 만들어 놓았다. 

그리고 이 세 가지 권한을 **파일을 소유한 사용자(user)**, **특정 그룹에 소속된 사용자(group)**, **그 외 사용자(others)**에 대해 각각 지정할 수 있도록 하였다.

<p align="center">
    <img src=https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbHm7H4%2Fbtq1qNZYJud%2FJyMX0Zn6iAHQ0k4E7vq6HK%2Fimg.png>
</p>

### chmod

`chmod` 명령어는 이러한 파일 및 디렉토리에 대한 권한을 변경할 수 있게 만둘어준다.

```
chmod [OPTION] [MODE] [FILE]

OPTION
-v        : 모든 파일에 대해 모드가 적용되는 진단(diagnostic) 메시지 출력.
-f        : 에러 메시지 출력하지 않음.
-c        : 기존 파일 모드가 변경되는 경우만 진단(diagnostic) 메시지 출력.
-R        : 지정한 모드를 파일과 디렉토리에 대해 재귀적으로(recursively) 적용.

MODE : 파일에 적용할 모드(mode) 문자열 조합.
    
- u, g, o, a : 소유자(u), 그룹(g), 그 외 사용자(o), 모든 사용자(a) 지정.
    
- +, -, =   : 현재 모드에 권한 추가(+), 현재 모드에서 권한 제거(-), 현재 모드로 권한 지정(=)
   
- r, w, x   : 읽기 권한(r), 쓰기 권한(w), 실행 권한(x)

- X       : "디렉토리" 또는 "실행 권한(x)이 있는 파일"에 실행 권한(x) 적용.

- s       : 실행 시 사용자 또는 그룹 ID 지정(s). "setuid", "setgid".

- t       : 공유모드에서의 제한된 삭제 플래그를 나타내는 sticky(t) bit.

- 0~7     : 8진수(octet) 형식 모드 설정 값.
```

### 파일 권한 확인

리눅스에서 파일 또는 디렉토리에 지정된 권한을 확인하려면 `ls -l` 명령을 사용하면 된다.

`ls -l` 명령어를 실행하면 현재 디렉토리 내 파일 리스트(`ls=list`)가 하나의 파일 단위로 한줄로 길게(`-l=long`) 표시된다.

```
$ ls -l
- rw- r-- r-- 1 ppotta manager 17 Mar 24 03:17 FILE
```
- 파일 소유자 : ppotta / 권한 : rw-
- 파일 소유 그룹 : manager / 권한 : r--
- 그외 사용자 / 권한 : r--


### 디렉토리 권한 

디렉토리도 파일과 마찬가지로 세 가지 작업을 할 수 있다.

1. 디렉토리에 있는 파일 및 디렉토리 리스트 읽기 
   
2. 디렉토리에 파일 추가, 이름 변경, 삭제

3. 디렉토리에 접근 

### 8진수 형식으로 파일 모드 지정

`chmod` 명령어의 MODE 파라미터에 파일 모드를 표현하는 8진수 값을 사용함으로써 파일 모드를 지정할 수 있다.

권한 없음(`-`)은 0, 읽기(`r`)는 4, 쓰기(`w`)는 2, 실행은(`x`)1로 표현할 수 있으며, 이 값들을 모두 합친 값이 하나의 8진수가 되는 것으로 변환되는 것이다.

즉, `chmod 755 FILE` 이라는 명령어는 다음과 같다.

- 파일의 소유자는 해당 파일에 대해서 모든 권한 r, w, x 사용 가능
- 그룹은 해당 파일에 대해서 r, x 사용 가능
- 그 외 사용자는 해당 파일에 대해서 r, x 사용 가능


## 출처

- https://recipes4dev.tistory.com/175